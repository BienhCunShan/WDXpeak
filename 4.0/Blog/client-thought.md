# 客户端框架沉思录

## 客户端框架



解耦合

+ 核心功能 SDK 化：通讯、定位、Hybrid 框架、数据库、登录、分享、基础库
+ 公共组件统一：地图、日历、通讯录、城市、图片等

App 性能和质量：采用第三方性能采集 SDK 或自建。自建的好处是完整掌握用户数据。App 通过日志 SDK 采集日志，上传至日志服务端，日志消息经 Kafka 消息队列存入 HDFS(RCFile)，后期查询基于 Hive 实现

数据采用简单直观 Portal 进行展示

优化

+ TCP 长连接实现网络服务，减少网络连接时间
+ 根据网络状况 2G/3G/4G/WIFI 进行参数调优
+ 根据连接/读/写不同阶段使用重试机制
+ 使用 IP 列表避免 DNS 解析失败或劫持，因为不需要解析
+ 根据网络延迟选择服务端 IP（假设 AWS 多区域虚拟机，为美东美西提供服务）
+ 使用 ProtocolBuffer + Gzip 减少 Payload


